import React, { useEffect, useState } from 'react';
import Recipe from './Recipe';
import './App.css';
import 'bootstrap/dist/css/bootstrap.min.css';

const App = () => {

  const APP_ID = "d286682f";
  const APP_KEY = "3ea449fe32aac598ed47beffd95f6794";


  const [recipes, setRecipes] = useState([]);
  //uses this state to pass down to the prop
  const [search, setSearch] = useState('');
  const [query, setQuery] = useState('');

  useEffect(() => {
    getRecipes();
  }, [query]); //passing empty array in will only run this function when the page first loads instead of every click
  //to run everytime if counter changes then put [counter]

  const getRecipes = async () => {
    const response = await fetch(`https://api.edamam.com/search?q=${query}&app_id=${APP_ID}&app_key=${APP_KEY}`);
    const data = await response.json();
    setRecipes(data.hits);
    console.log(data.hits);
  };

  const updateSearch = e => {
    setSearch(e.target.value);
  };

  //e = event
  //only want to get serach when we submit form
  //e.prevent default is to stop page refresh
  const getSearch = e => {
    e.preventDefault();
    setQuery(search);
    setSearch('');

  }

  return (
    <div className="App">
      <div className="bannerBackground">
        <span></span>
        <span></span>
        <span></span>
        <span></span>
      </div>
      <div className="Banner">





        <svg width="768" height="400" viewBox="0 0 768 519" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="768" height="519" stroke="none" fill="#E5E5E5" fillOpacity="0" />
          <g id="undraw_diet_ghvw 1">
            <g clipPath="url(#clip0)">
              <g id="List1">
                <path id="Vector" d="M124.241 0C124.241 7.93478 122.678 15.7919 119.642 23.1226C116.605 30.4534 112.155 37.1143 106.544 42.7251C100.933 48.3358 94.2723 52.7865 86.9416 55.823C79.6108 58.8595 71.7537 60.4224 63.8189 60.4224C55.8841 60.4224 48.027 58.8595 40.6963 55.823C33.3655 52.7865 26.7046 48.3358 21.0938 42.7251C15.4831 37.1143 11.0324 30.4534 7.99593 23.1226C4.95942 15.7919 3.39655 7.93478 3.39655 0H124.241Z" fill="#F9A826" />
                <path id="Vector_2" d="M25.5634 10.7259C25.5634 12.3055 25.0031 13.5861 24.312 13.5861C23.6209 13.5861 23.0607 12.3055 23.0607 10.7259C23.1366 9.65697 23.5785 8.64687 24.312 7.86563C25.0455 8.64687 25.4874 9.65697 25.5634 10.7259V10.7259Z" fill="#3F3D56" />
                <path id="Vector_3" d="M88.8459 20.7367C88.8459 22.3164 88.2856 23.5969 87.5945 23.5969C86.9034 23.5969 86.3432 22.3164 86.3432 20.7367C86.4192 19.6678 86.8611 18.6577 87.5945 17.8765C88.328 18.6577 88.77 19.6678 88.8459 20.7367Z" fill="#3F3D56" />
                <path id="Vector_4" d="M42.3672 15.0162C42.3672 16.5959 41.8069 17.8764 41.1158 17.8764C40.4247 17.8764 39.8644 16.5959 39.8644 15.0162C39.9404 13.9473 40.3823 12.9372 41.1158 12.156C41.8493 12.9372 42.2912 13.9473 42.3672 15.0162Z" fill="#3F3D56" />
                <path id="Vector_5" d="M67.3942 37.5405C67.3942 39.1202 66.8339 40.4008 66.1428 40.4008C65.4517 40.4008 64.8915 39.1202 64.8915 37.5405C64.9674 36.4716 65.4093 35.4615 66.1428 34.6803C66.8763 35.4615 67.3182 36.4716 67.3942 37.5405V37.5405Z" fill="#3F3D56" />
                <path id="Vector_6" d="M40.5795 34.6803C40.5795 36.26 40.0193 37.5405 39.3282 37.5405C38.6371 37.5405 38.0768 36.26 38.0768 34.6803C38.1528 33.6114 38.5947 32.6013 39.3282 31.8201C40.0617 32.6013 40.5036 33.6114 40.5795 34.6803V34.6803Z" fill="#3F3D56" />
                <path id="Vector_7" d="M103.147 7.86563C103.147 9.4453 102.587 10.7259 101.896 10.7259C101.205 10.7259 100.644 9.4453 100.644 7.86563C100.72 6.79673 101.162 5.78664 101.896 5.0054C102.629 5.78664 103.071 6.79673 103.147 7.86563Z" fill="#3F3D56" />
                <path id="Vector_8" d="M80.2652 43.261C80.2652 44.8406 79.705 46.1212 79.0139 46.1212C78.3228 46.1212 77.7625 44.8406 77.7625 43.261C77.8385 42.1921 78.2804 41.182 79.0139 40.4008C79.7473 41.182 80.1892 42.1921 80.2652 43.261V43.261Z" fill="#3F3D56" />
                <path id="Vector_9" d="M63.8189 63.8189C46.8989 63.7998 30.6775 57.0698 18.7133 45.1056C6.74906 33.1414 0.0191518 16.9199 0 0H6.793C6.793 7.48874 8.26802 14.9042 11.1338 21.8228C13.9997 28.7415 18.2001 35.028 23.4955 40.3234C28.7908 45.6187 35.0773 49.8192 41.996 52.685C48.9147 55.5508 56.3301 57.0258 63.8189 57.0258C71.3076 57.0258 78.723 55.5508 85.6417 52.685C92.5604 49.8192 98.8469 45.6187 104.142 40.3234C109.438 35.028 113.638 28.7415 116.504 21.8228C119.37 14.9042 120.845 7.48874 120.845 0H127.638C127.619 16.9199 120.889 33.1414 108.924 45.1056C96.9603 57.0698 80.7388 63.7997 63.8189 63.8189Z" fill="#3F3D56" />
                <path id="Vector_10" d="M210.819 21.9095H190.819V41.9095H210.819V21.9095Z" fill="#3F3D56" />
                <path id="Vector_11" d="M406.819 30.9095H245.819V32.9095H406.819V30.9095Z" fill="#3F3D56" />
              </g>
              <g id="List2">
                <path id="Vector_12" d="M124.638 142.927C124.677 133.551 116.689 125.882 107.313 125.882H20.3098C11.082 125.882 3.10924 133.424 3.0012 142.651C2.96772 145.274 3.54378 147.868 4.68397 150.23C5.82415 152.592 7.49731 154.657 9.57157 156.262C10.1033 156.658 10.5217 157.187 10.785 157.795C11.0483 158.404 11.1473 159.071 11.0721 159.73C10.9711 160.478 10.9205 161.231 10.9206 161.986V222.165C10.9206 224.38 11.3569 226.574 12.2046 228.62C13.0523 230.667 14.2948 232.526 15.8611 234.093C17.4275 235.659 19.287 236.902 21.3335 237.749C23.3801 238.597 25.5735 239.033 27.7887 239.033H99.2834C103.757 239.033 108.048 237.256 111.211 234.093C114.374 230.929 116.151 226.639 116.151 222.165V161.986C116.152 161.325 116.113 160.666 116.036 160.01C115.968 159.361 116.075 158.705 116.346 158.111C116.616 157.517 117.041 157.006 117.576 156.632C119.753 155.069 121.528 153.011 122.755 150.629C123.983 148.247 124.628 145.607 124.638 142.927Z" fill="#3F3D56" />
                <path id="Vector_13" d="M120.87 141.276C120.436 138.012 118.824 135.019 116.336 132.861C113.849 130.702 110.658 129.528 107.365 129.559H20.2839C17.2055 129.532 14.2098 130.555 11.7915 132.46C9.37317 134.365 7.67694 137.038 6.98294 140.037C6.38872 142.794 6.68486 145.668 7.82869 148.245C8.97252 150.823 10.905 152.97 13.3477 154.379C14.0529 154.782 14.604 155.409 14.9143 156.159C15.2246 156.91 15.2766 157.743 15.062 158.526C14.753 159.654 14.5969 160.819 14.5981 161.989V222.162C14.5985 225.238 15.6727 228.216 17.6353 230.584C19.5979 232.951 22.3256 234.559 25.3474 235.13C26.1535 235.28 26.9716 235.356 27.7915 235.356H99.2862C100.493 235.358 101.695 235.192 102.856 234.864C105.624 234.085 108.061 232.423 109.797 230.131C111.534 227.84 112.474 225.043 112.474 222.168V161.983C112.474 160.888 112.337 159.797 112.067 158.735C111.993 158.441 111.955 158.139 111.954 157.836C111.954 157.171 112.135 156.518 112.478 155.948C112.821 155.378 113.312 154.912 113.9 154.6L113.905 154.594C116.275 153.336 118.208 151.391 119.451 149.014C120.694 146.637 121.189 143.94 120.87 141.276V141.276Z" fill="#F9A826" />
                <path id="Vector_14" opacity="0.2" d="M112.474 167.748V162.09H102.856V129.559H97.1986V162.09H66.9306V129.559H61.273V162.09H31.005V129.559H25.3474V162.09H14.598V167.748H25.3474V184.721H14.598V190.378H25.3474V207.351H14.598V213.009H25.3474V235.13C26.1534 235.28 26.9716 235.356 27.7915 235.356H31.005V213.008H61.273V235.356H66.9306V213.008H97.1986V235.356H99.2862C100.493 235.358 101.695 235.192 102.856 234.864V213.008H112.474V207.351H102.856V190.378H112.474V184.721H102.856V167.748H112.474ZM31.005 167.748H61.273V184.721H31.005V167.748ZM31.005 207.351V190.378H61.273V207.351H31.005ZM97.1986 207.351H66.9306V190.378H97.1986V207.351ZM97.1986 184.721H66.9306V167.748H97.1986V184.721Z" fill="black" />
                <path id="Vector_15" d="M210.819 172.458H190.819V192.458H210.819V172.458Z" fill="#3F3D56" />
                <path id="Vector_16" d="M406.819 181.458H245.819V183.458H406.819V181.458Z" fill="#3F3D56" />
              </g>
              <g id="Arm">
                <path id="Vector_17" d="M642.868 134.881L617.32 155.018L563.184 135.992C563.184 135.992 544.778 115.289 534.369 130.709C530.805 135.99 554.153 145.747 556.356 146.653C561.863 148.92 614.614 177.86 619.783 174.064C624.953 170.267 654.037 151.063 654.037 151.063L642.868 134.881Z" fill="#A0616A" />
              </g>
              <g id="person">
                <path id="Vector_18" d="M645.091 518.945C712.672 518.945 767.457 514.821 767.457 509.733C767.457 504.646 712.672 500.521 645.091 500.521C577.51 500.521 522.724 504.646 522.724 509.733C522.724 514.821 577.51 518.945 645.091 518.945Z" fill="#E6E6E6" />
                <path id="Vector_19" d="M719.534 102.993C695.321 93.9451 672.287 89.6643 653.612 102.993V59.9759C653.612 55.6474 654.465 51.3613 656.121 47.3622C657.778 43.3632 660.206 39.7296 663.266 36.6689C666.327 33.6082 669.961 31.1803 673.96 29.5239C677.959 27.8674 682.245 27.0149 686.573 27.0149H686.573C690.902 27.0149 695.188 27.8674 699.187 29.5239C703.186 31.1803 706.82 33.6082 709.88 36.6689C712.941 39.7297 715.369 43.3633 717.025 47.3623C718.682 51.3613 719.534 55.6474 719.534 59.9759L719.534 102.993Z" fill="#2F2E41" />
                <path id="Vector_20" d="M658.693 196.964L656.714 210.814C656.714 210.814 651.768 225.654 656.714 253.354L577.077 470.503L635.939 487.321L665.123 368.606L706.179 278.086L702.222 380.972L681.447 490.783L742.783 488.31L760.656 300.017C763.546 270.259 758.384 240.271 745.711 213.192C740.753 202.662 735.421 194.363 730.584 193.158C716.072 189.544 658.693 196.964 658.693 196.964Z" fill="#2F2E41" />
                <path id="Vector_21" d="M584.496 469.019L564.216 490.783C564.216 490.783 525.139 511.064 552.839 513.537C580.539 516.01 589.937 505.128 589.937 505.128C589.937 505.128 624.562 502.655 624.068 497.709C623.573 492.762 621.1 476.439 621.1 476.439L584.496 469.019Z" fill="#2F2E41" />
                <path id="Vector_22" d="M694.555 474.267V489.601C694.555 489.601 695.049 496.031 694.555 497.515C694.06 498.999 686.64 517.301 711.373 513.344C736.105 509.387 726.212 494.053 726.212 494.053L720.276 471.794L694.555 474.267Z" fill="#2F2E41" />
                <path id="Vector_23" d="M686.27 90.1208C699.997 90.1208 711.125 78.9924 711.125 65.2649C711.125 51.5373 699.997 40.4089 686.27 40.4089C672.542 40.4089 661.414 51.5373 661.414 65.2649C661.414 78.9924 672.542 90.1208 686.27 90.1208Z" fill="#A0616A" />
                <path id="Vector_24" d="M703.458 78.9913C703.458 78.9913 699.996 111.638 703.458 117.574C706.921 123.509 668.339 111.638 668.339 111.638C668.339 111.638 676.748 89.3789 673.78 80.4752C670.812 71.5716 703.458 78.9913 703.458 78.9913Z" fill="#A0616A" />
                <path id="Vector_25" d="M723.244 172.974L731.159 194.738L657.456 203.147C657.456 203.147 649.542 201.663 649.542 195.233C649.542 188.803 641.133 166.049 641.133 166.049C641.133 166.049 620.538 149.356 610.646 144.905C607.059 143.292 612.424 143.958 615.441 137.112C616.346 135.054 617.43 132.883 618.612 130.682C619.576 128.876 620.615 127.046 621.679 125.241C622.97 123.039 624.3 120.873 625.591 118.81C629.499 112.573 633.065 107.33 634.208 105.208C637.671 98.7771 670.223 98.2033 670.223 98.2033C679.532 104.06 706.426 105.208 706.426 105.208C706.426 105.208 724.926 112.949 732.633 118.81C733.192 119.231 723.244 172.974 723.244 172.974Z" fill="white" />
                <path id="Vector_26" d="M707.244 35.4263V34.8361L706.542 34.8751C702.557 31.8404 697.933 29.7531 693.021 28.7716C688.11 27.7901 683.039 27.9401 678.193 29.2102C682.838 30.4377 687.157 32.6691 690.845 35.7471L667.02 37.0707L656.964 59.4172H663.77L669.255 49.3613V59.4172H692.272L693.836 51.5959L698.181 59.4172H702.703C702.731 59.9748 702.775 60.5285 702.775 61.0931L698.305 104.11L719.534 95.1716V61.0931C719.538 56.1676 718.436 51.3042 716.309 46.8617C714.181 42.4193 711.084 38.5113 707.244 35.4263V35.4263Z" fill="#2F2E41" />
                <path id="Vector_27" d="M740.557 149.231L739.073 188.308L735.116 263.989C735.116 263.989 740.557 296.635 726.707 296.141C712.857 295.646 723.244 257.558 723.244 257.558L719.287 197.706L723.244 155.661L740.557 149.231Z" fill="#A0616A" />
                <path id="Vector_28" d="M744.514 170.501C744.514 174.953 719.534 173.716 719.534 173.716L706.426 105.207C706.426 105.207 724.926 112.949 732.633 118.81C734.446 120.692 735.93 122.866 737.02 125.241C737.609 126.828 738.168 128.669 738.697 130.682C739.221 132.68 739.711 134.852 740.171 137.112C742.33 148.138 743.78 159.29 744.514 170.501V170.501Z" fill="white" />
              </g>
              <g id="List3">
                <path id="Vector_29" d="M210.819 321.959H190.819V341.959H210.819V321.959Z" fill="#3F3D56" />
                <path id="Vector_30" d="M406.819 330.959H245.819V332.959H406.819V330.959Z" fill="#3F3D56" />
                <path id="Vector_31" d="M63.1461 329.424L25.2841 325.503C25.575 323.493 25.3516 321.441 24.6348 319.541C23.918 317.64 22.7312 315.952 21.1851 314.634C19.6391 313.316 17.7842 312.412 15.7939 312.005C13.8036 311.599 11.7427 311.703 9.80365 312.309C7.86464 312.915 6.11078 314.002 4.70592 315.47C3.30105 316.937 2.291 318.736 1.7701 320.7C1.2492 322.663 1.23445 324.727 1.72722 326.698C2.21999 328.668 3.2042 330.482 4.58794 331.969C3.18204 333.488 2.19179 335.344 1.71297 337.357C1.23415 339.37 1.28296 341.473 1.85469 343.462C2.42642 345.45 3.50171 347.258 4.97656 348.71C6.45142 350.161 8.27593 351.208 10.2736 351.748C12.2713 352.288 14.3745 352.304 16.3799 351.793C18.3853 351.282 20.225 350.262 21.721 348.833C23.217 347.403 24.3187 345.611 24.9195 343.631C25.5204 341.651 25.6001 339.549 25.1509 337.529L63.1461 334.036V329.424Z" fill="#CCCCCC" />
                <path id="Vector_32" d="M101.648 355.446C116.532 359.106 131.527 348.549 132.303 333.241C132.324 332.816 132.335 332.389 132.335 331.959C132.335 331.529 132.324 331.102 132.303 330.678C131.527 315.37 116.532 304.812 101.648 308.472L51.1534 320.889C49.6988 320.888 48.2581 321.173 46.9138 321.729C45.5695 322.284 44.3479 323.1 43.3188 324.128C42.2897 325.156 41.4734 326.377 40.9164 327.72C40.3594 329.064 40.0727 330.505 40.0727 331.959C40.0727 333.414 40.3594 334.854 40.9164 336.198C41.4734 337.542 42.2897 338.763 43.3188 339.791C44.3479 340.819 45.5695 341.634 46.9138 342.19C48.2581 342.746 49.6988 343.031 51.1534 343.029L101.648 355.446Z" fill="#F9A826" />
              </g>
            </g>
          </g>
          <defs>
            <clipPath id="clip0">
              <rect width="767.457" height="518.945" fill="white" />
            </clipPath>
          </defs>
        </svg>
        <h1>RecipEasy</h1>
        <p>Recipes made simple</p>

        <form onSubmit={getSearch} className="search-form">
          <input
            className="search-bar"
            type="text"
            value={search}
            onChange={updateSearch} />
          <button className="search-button" type="submit">
            Search
        </button>
        </form>

      

        <div className="spacer">

        </div>

      </div>
      <div>
        <div className="recipes">
          {recipes.map(recipe => (
            <Recipe
              key={recipe.recipe.label}
              title={recipe.recipe.label}
              dietLabels={recipe.recipe.dietLabels}
              calories={recipe.recipe.calories}
              image={recipe.recipe.image}
              ingredients={recipe.recipe.ingredients}
            />
          ))}
        </div>
      </div>


    </div>
  );
}

export default App;
